var M,B=-1,m=function(t){addEventListener("pageshow",function(e){e.persisted&&(B=e.timeStamp,t(e))},!0)},S=function(){var t=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(t&&t.responseStart>0&&t.responseStart<performance.now())return t},E=function(){var t=S();return t&&t.activationStart||0},s=function(t,e){var n=S(),i="navigate";return B>=0?i="back-forward-cache":n&&(document.prerendering||E()>0?i="prerender":document.wasDiscarded?i="restore":n.type&&(i=n.type.replace(/_/g,"-"))),{name:t,value:e===void 0?-1:e,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:i}},h=function(t,e,n){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){var i=new PerformanceObserver(function(r){Promise.resolve().then(function(){e(r.getEntries())})});return i.observe(Object.assign({type:t,buffered:!0},n||{})),i}}catch{}},l=function(t,e,n,i){var r,a;return function(u){e.value>=0&&(u||i)&&((a=e.value-(r||0))||r===void 0)&&(r=e.value,e.delta=a,e.rating=function(c,o){return c>o[1]?"poor":c>o[0]?"needs-improvement":"good"}(e.value,n),t(e))}},L=function(t){requestAnimationFrame(function(){return requestAnimationFrame(function(){return t()})})},b=function(t){document.addEventListener("visibilitychange",function(){document.visibilityState==="hidden"&&t()})},P=function(t){var e=!1;return function(){e||(t(),e=!0)}},v=-1,I=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},T=function(t){document.visibilityState==="hidden"&&v>-1&&(v=t.type==="visibilitychange"?t.timeStamp:0,K())},_=function(){addEventListener("visibilitychange",T,!0),addEventListener("prerenderingchange",T,!0)},K=function(){removeEventListener("visibilitychange",T,!0),removeEventListener("prerenderingchange",T,!0)},H=function(){return v<0&&(v=I(),_(),m(function(){setTimeout(function(){v=I(),_()},0)})),{get firstHiddenTime(){return v}}},w=function(t){document.prerendering?addEventListener("prerenderingchange",function(){return t()},!0):t()},k=[1800,3e3],O=function(t,e){e=e||{},w(function(){var n,i=H(),r=s("FCP"),a=h("paint",function(u){u.forEach(function(c){c.name==="first-contentful-paint"&&(a.disconnect(),c.startTime<i.firstHiddenTime&&(r.value=Math.max(c.startTime-E(),0),r.entries.push(c),n(!0)))})});a&&(n=l(t,r,k,e.reportAllChanges),m(function(u){r=s("FCP"),n=l(t,r,k,e.reportAllChanges),L(function(){r.value=performance.now()-u.timeStamp,n(!0)})}))})},F=[.1,.25],Q=function(t,e){e=e||{},O(P(function(){var n,i=s("CLS",0),r=0,a=[],u=function(o){o.forEach(function(f){if(!f.hadRecentInput){var G=a[0],J=a[a.length-1];r&&f.startTime-J.startTime<1e3&&f.startTime-G.startTime<5e3?(r+=f.value,a.push(f)):(r=f.value,a=[f])}}),r>i.value&&(i.value=r,i.entries=a,n())},c=h("layout-shift",u);c&&(n=l(t,i,F,e.reportAllChanges),b(function(){u(c.takeRecords()),n(!0)}),m(function(){r=0,i=s("CLS",0),n=l(t,i,F,e.reportAllChanges),L(function(){return n()})}),setTimeout(n,0))}))},D=0,C=1/0,g=0,V=function(t){t.forEach(function(e){e.interactionId&&(C=Math.min(C,e.interactionId),g=Math.max(g,e.interactionId),D=g?(g-C)/7+1:0)})},N=function(){return M?D:performance.interactionCount||0},W=function(){"interactionCount"in performance||M||(M=h("event",V,{type:"event",buffered:!0,durationThreshold:0}))},d=[],y=new Map,j=0,U=function(){var t=Math.min(d.length-1,Math.floor((N()-j)/50));return d[t]},X=[],Y=function(t){if(X.forEach(function(r){return r(t)}),t.interactionId||t.entryType==="first-input"){var e=d[d.length-1],n=y.get(t.interactionId);if(n||d.length<10||t.duration>e.latency){if(n)t.duration>n.latency?(n.entries=[t],n.latency=t.duration):t.duration===n.latency&&t.startTime===n.entries[0].startTime&&n.entries.push(t);else{var i={id:t.interactionId,latency:t.duration,entries:[t]};y.set(i.id,i),d.push(i)}d.sort(function(r,a){return a.latency-r.latency}),d.length>10&&d.splice(10).forEach(function(r){return y.delete(r.id)})}}},z=function(t){var e=self.requestIdleCallback||self.setTimeout,n=-1;return t=P(t),document.visibilityState==="hidden"?t():(n=e(t),b(t)),n},x=[200,500],Z=function(t,e){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(e=e||{},w(function(){var n;W();var i,r=s("INP"),a=function(c){z(function(){c.forEach(Y);var o=U();o&&o.latency!==r.value&&(r.value=o.latency,r.entries=o.entries,i())})},u=h("event",a,{durationThreshold:(n=e.durationThreshold)!==null&&n!==void 0?n:40});i=l(t,r,x,e.reportAllChanges),u&&(u.observe({type:"first-input",buffered:!0}),b(function(){a(u.takeRecords()),i(!0)}),m(function(){j=N(),d.length=0,y.clear(),r=s("INP"),i=l(t,r,x,e.reportAllChanges)}))}))},R=[2500,4e3],A={},$=function(t,e){e=e||{},w(function(){var n,i=H(),r=s("LCP"),a=function(o){e.reportAllChanges||(o=o.slice(-1)),o.forEach(function(f){f.startTime<i.firstHiddenTime&&(r.value=Math.max(f.startTime-E(),0),r.entries=[f],n())})},u=h("largest-contentful-paint",a);if(u){n=l(t,r,R,e.reportAllChanges);var c=P(function(){A[r.id]||(a(u.takeRecords()),u.disconnect(),A[r.id]=!0,n(!0))});["keydown","click"].forEach(function(o){addEventListener(o,function(){return z(c)},{once:!0,capture:!0})}),b(c),m(function(o){r=s("LCP"),n=l(t,r,R,e.reportAllChanges),L(function(){r.value=performance.now()-o.timeStamp,A[r.id]=!0,n(!0)})})}})},q=[800,1800],tt=function t(e){document.prerendering?w(function(){return t(e)}):document.readyState!=="complete"?addEventListener("load",function(){return t(e)},!0):setTimeout(e,0)},et=function(t,e){e=e||{};var n=s("TTFB"),i=l(t,n,q,e.reportAllChanges);tt(function(){var r=S();r&&(n.value=Math.max(r.responseStart-E(),0),n.entries=[r],i(!0),m(function(){n=s("TTFB",0),(i=l(t,n,q,e.reportAllChanges))(!0)}))})};const nt=.25;function rt(){try{return!!window.__analytics_allowed&&!!window.gtag}catch{return!1}}function p(t){if(Math.random()>nt)return;const e=t.name==="CLS"?Math.round(t.value*1e3):Math.round(t.value),n={name:t.name,value:e,id:t.id,path:location.pathname+location.search};rt()&&window.gtag("event","web_vitals",{metric_name:n.name,metric_value:n.value,metric_id:n.id,page_path:n.path,non_interaction:!0})}function it(){$(p),Q(p),Z(p),O(p),et(p)}function at(){const t=window.matchMedia("(prefers-reduced-motion: reduce)");document.body.toggleAttribute("data-reduce-motion",t.matches)}export{at as applyReducedMotionAttribute,it as startWebVitals};
